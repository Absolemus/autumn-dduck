# autumn-dduck - Компонент ОСени для работы с DDNS сервером Duck-DNS

Компонент обновляет информацию о текущем IP адресе для сервиса DDNS.  
Необходимо иметь аккаунт на сайте [duckdns](https://www.duckdns.org).  
Проходить скучную процедуру регистрации необязательно, можно просто авторизоваться любым удобным способом

## Начало

Нужно создать домен (одновременно можно держать до 5-ти доменов).  
Для работы с библиотекой нам нужно будет сохранить имя домена и выданный токен.  
Все это описано в [FAQ](https://www.duckdns.org/faqs.jsp).

## Как установить?

Клонировать репу, открыть `cmd`, дать команды

```batch
cd myPath/autumn-dduck
opm build
opm i autumn-dduck-0.1.0.ospx
```

Все, компонента ляжет в бибилиотеки `lib` оскрипта.

## Самое страшное

Надо пробросить порты на вашем роутере (да-да, без этого к сожалению совсем никак).  
Информацию по своему роутеру легко [гуглить](https://yandex.kz/search/?text=как+пробросить+порты+на+роутере+на+модеме+%25МойМодем%25&lr=162&clid=2378387-1&win=571).

## Что дальше

Дальше нам надо задать настройки.

`autumn-properties.yml`

```yaml
DDNS: # Имя настроек, должно быть точно таким же
  Token: # Токен сюды, обязателен к заполнению
  Domain: # Домен сюды, обязателен к заполнению
  Use: # Истина, если запуск библиотеки необходим (Ложь по умолчанию)
  Delay: # Значение в милисекундах, частота обновления информации в DDNS (300000мс по умолчанию)
  Verbose: # Истина, если хотите в логах видеть расширенную информацию по обновлению IP адреса (Ложь по умолчанию)
```

## Как запустить?

Использовать библиотеку можно (и нужно) в связке с бибилиотекой [ОСень](https://github.com/nixel2007/autumn).

```bsl
#Использовать autumn
#Использовать autumn-dduck

Поделка = Новый Поделка();
Поделка.ЗапуститьПриложение();
```

Все готово, поделка прочтет нужную инфу из файла, и будет спамить в сервис DDNS наш текущий IP.  
А ваши сервисы могут стучаться в ваш роутер из всемирной паутины.

## В связке с другими компонентами ОСени

Если вы любитель [вина](https://github.com/autumn-library/winow), то autumn-dduck нужно импортировать раньше.

```bsl
#Использовать autumn
#Использовать autumn-dduck
#Использовать winow

Поделка = Новый Поделка();
Поделка.ЗапуститьПриложение();
```

Если вы уже прокинули порты, будьте внимательны. Вино оно такое, если его не контролировать, оно сразу побежит слушать порт `3333`.  
Чтобы установить свой порт, вернемся к файлу `autumn-properties.yml`

```yaml
DDNS: # Имя настроек, должно быть точно таким же
    Token: # Токен сюды, обязателен к заполнению
    Domain: # Домен сюды, обязателен к заполнению
    Use: # Истина, если запуск библиотеки необходим (Ложь по умолчанию)
    Delay: # Значение в милисекундах, частота обновления информации в DDNS (300000мс по умолчанию)
    Verbose: # Истина, если хотите в логах видеть расширенную информацию по обновлению IP адреса (Ложь по умолчанию)
winow:
    Порт: # Сюды необходимый порт
```

Ну вот и все, ~~сервисы крутятся, лавеха мутится,~~ сервис поднят, DDNS своевременно получает инфу о IP, можно ддосить самого себя.

## Что дальше?

* А дальше надо дописать возможность отправки `ipv6` адреса.
* Получение статуса о текущем состоянии сервиса, доступности DDNS и полном внешнем адресе.
* Возможно что-то еще, на что у меня фантазии не хватает.
